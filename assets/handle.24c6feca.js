import{d as O,u as S,a as T,r as C,q as j,g as i,c as y,h as e,w as u,o as c,k as m,t as w,f as a,F as E,A as k,m as q,i as D,l as G,_ as H}from"./index.b34ed6b3.js";import{c as I,s as J,e as K,f as P}from"./constant.07ab4600.js";import"./request.c6ada8c9.js";const Q={class:"handle-container"},W=m("\u5143"),X=m("\u5339"),Y=m("\u5E74"),Z={class:"mt10"},ee=m("\u5220\u9664"),ue=m("\u65B0\u589E\u63CF\u8FF0"),le=m("\u91CD\u7F6E"),te=O({__name:"handle",setup(re){var B;const A=S(),U=T(),b=(B=A.params)==null?void 0:B.id,N=b?"\u7F16\u8F91":"\u65B0\u5EFA",g=C();let t=C({sort:"",brand:"",type:"",price:"",power:"",quality:"",url:"",describe:[{key:1,value:""}]});const x=j({sort:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B",trigger:"change"}],brand:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D",trigger:"blur"}],type:[{required:!0,message:"\u8BF7\u8F93\u5165\u578B\u53F7",trigger:"blur"}],price:[{type:"number",required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C",trigger:"blur"}],power:[{required:!0,validator:(s,l,o)=>{if(!l)return o(new Error("\u8BF7\u8F93\u5165\u5185\u5BB9"));if(!Number(l))return o(new Error("\u8BF7\u8F93\u5165\u6570\u5B57\u503C"));if(!/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/.test(l))return o(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u6570\u5B57"));o()},trigger:"blur"}],quality:[{type:"number",required:!0,message:"\u8BF7\u8F93\u5165\u5339\u6570",trigger:"blur"}],url:[{required:!0,message:"\u8BF7\u8F93\u5165 url",trigger:"blur"}]}),$=s=>{if(t.value.describe.length===1)return q({message:"\u81F3\u5C11\u8981\u4FDD\u7559\u4E00\u6761\u63CF\u8FF0\uFF01",type:"warning"});t.value.describe.splice(s,1)},h=()=>{t.value.describe=[...t.value.describe,{key:Date.now(),value:""}]},M=s=>{!s||s.validate(async l=>{if(l){let o;b?o=await K({...t.value,describe:t.value.describe.map(n=>n.value)}):o=await P({...t.value,describe:t.value.describe.map(n=>n.value)});const f=o.code===90001?"success":"error";q({message:o.msg,type:f}),o.code===90001&&U.back()}else return console.log("error submit!"),!1})},R=s=>{!s||s.resetFields()};return(s=>{s&&I(s).then(l=>{if(l.code===90001){const o=l.data,f=o.describe.map((n,d)=>({key:d,value:n}));t.value={...o,describe:f}}})})(b),(s,l)=>{const o=i("el-option"),f=i("el-select"),n=i("el-form-item"),d=i("el-col"),p=i("el-row"),_=i("el-input"),F=i("el-button"),z=i("el-form"),L=i("el-card");return c(),y("div",Q,[e(L,null,{header:u(()=>[m(w(a(N)),1)]),default:u(()=>[e(z,{ref_key:"formRef",ref:g,model:a(t),rules:x,"label-width":"120px",size:"default","status-icon":""},{default:u(()=>[e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u5206\u7C7B",prop:"sort"},{default:u(()=>[e(f,{modelValue:a(t).sort,"onUpdate:modelValue":l[0]||(l[0]=r=>a(t).sort=r),modelModifiers:{number:!0},placeholder:"\u9009\u62E9\u5206\u7C7B"},{default:u(()=>[(c(!0),y(E,null,k(a(J),r=>(c(),D(o,{label:r.label,value:r.value,key:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u54C1\u724C",prop:"brand"},{default:u(()=>[e(_,{modelValue:a(t).brand,"onUpdate:modelValue":l[1]||(l[1]=r=>a(t).brand=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u578B\u53F7",prop:"type"},{default:u(()=>[e(_,{modelValue:a(t).type,"onUpdate:modelValue":l[2]||(l[2]=r=>a(t).type=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u4EF7\u683C",prop:"price"},{default:u(()=>[e(_,{modelValue:a(t).price,"onUpdate:modelValue":l[3]||(l[3]=r=>a(t).price=r),modelModifiers:{number:!0}},{append:u(()=>[W]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u5339\u6570",prop:"power"},{default:u(()=>[e(_,{modelValue:a(t).power,"onUpdate:modelValue":l[4]||(l[4]=r=>a(t).power=r)},{append:u(()=>[X]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u8D28\u4FDD",prop:"quality"},{default:u(()=>[e(_,{modelValue:a(t).quality,"onUpdate:modelValue":l[5]||(l[5]=r=>a(t).quality=r),modelModifiers:{number:!0}},{append:u(()=>[Y]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:8},{default:u(()=>[e(n,{label:"\u94FE\u63A5",prop:"url"},{default:u(()=>[e(_,{modelValue:a(t).url,"onUpdate:modelValue":l[6]||(l[6]=r=>a(t).url=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:u(()=>[e(d,{span:24},{default:u(()=>[(c(!0),y(E,null,k(a(t).describe,(r,v)=>(c(),D(n,{key:r.key,label:`\u63CF\u8FF0${v+1}`,prop:"describe."+v+".value",rules:{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}},{default:u(()=>[e(_,{modelValue:r.value,"onUpdate:modelValue":V=>r.value=V,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"]),G("div",Z,[e(F,{type:"danger",onClick:V=>$(v)},{default:u(()=>[ee]),_:2},1032,["onClick"])])]),_:2},1032,["label","prop"]))),128))]),_:1})]),_:1}),e(n,null,{default:u(()=>[e(F,{onClick:h},{default:u(()=>[ue]),_:1}),e(F,{onClick:l[7]||(l[7]=r=>R(g.value))},{default:u(()=>[le]),_:1}),e(F,{type:"primary",onClick:l[8]||(l[8]=r=>M(g.value))},{default:u(()=>[m(w(a(b)?"\u66F4\u65B0":"\u65B0\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}}),ie=H(te,[["__file","/home/runner/work/auto-answer-frontend/auto-answer-frontend/src/views/air/handle.vue"]]);export{ie as default};
